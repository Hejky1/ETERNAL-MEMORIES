<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Na캜칤t치m...</title>
    <style>
        /* === NOV칗 LUXUSN칈 DESIGN 2.0 (Modern & Clean) === */
        :root {
            --primary-color: #007bff; /* Hlavn칤 modr치 */
            --primary-dark: #0056b3;  /* Tmav코칤 modr치 pro p콏echod */
            --bg-dark: #121212;       /* Pozad칤 str치nky */
            --card-dark: #1e1e1e;     /* Pozad칤 karet/kontejneru */
            --text-light: #ffffff;    /* Hlavn칤 text */
            --text-dim: #b0b0b0;      /* Tlumen칳 text */
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            /* Jemn칳 vzorek na pozad칤 pro pr칠miov칳 pocit */
            background-image: radial-gradient(circle at center, #1a1a1a 0%, #121212 100%);
        }

        .container {
            width: 100%;
            max-width: 550px;
            background: var(--card-dark);
            min-height: 100vh;
            padding: 30px 20px;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.8);
            border-left: 1px solid #2a2a2a;
            border-right: 1px solid #2a2a2a;
        }

        h1 {
            text-align: center;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 40px;
            color: var(--text-light);
            letter-spacing: 0.5px;
            position: relative;
            padding-bottom: 20px;
        }
        h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            border-radius: 2px;
        }
        
        /* Styl pro jednotliv칠 karty obsahu */
        .karta {
            background: #252525;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 25px;
            border: 1px solid #333;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .karta-padding { padding: 20px; }
        
        h2 { margin: 0 0 15px 0; font-size: 1.2rem; color: var(--text-light); font-weight: 600; }
        p { line-height: 1.7; color: var(--text-dim); margin: 0; font-size: 1.05rem; }

        /* VIDEO */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            background: #000;
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        /* === NOV칗 DESIGN TLA캛칈TEK === */
        .btn {
            display: block;
            width: 100%;
            padding: 18px 24px;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
            transition: all 0.3s ease;
            margin-top: 15px;
            border: none;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 123, 255, 0.5);
            filter: brightness(1.1);
        }

        .btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 5px rgba(0, 123, 255, 0.3);
            transition: all 0.1s;
        }

        /* Varianty tla캜칤tek */
        .btn-call { background: linear-gradient(135deg, #28a745, #1e7e34); box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3); }
        .btn-call:hover { box-shadow: 0 8px 25px rgba(40, 167, 69, 0.5); }

        .btn-pdf { background: linear-gradient(135deg, #dc3545, #c82333); box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3); }
        .btn-pdf:hover { box-shadow: 0 8px 25px rgba(220, 53, 69, 0.5); }

        /* Pati캜ka */
        .footer {
            text-align: center;
            font-size: 0.85rem;
            color: #666;
            margin-top: 50px;
            padding-bottom: 30px;
            font-weight: 500;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="page-title">Na캜칤t치m data...</h1>
        <div id="content-area"></div>
        <div class="footer">Technology by Eternal Memory</div>
    </div>

    <script>
        async function nactiObsah() {
            const params = new URLSearchParams(window.location.search);
            const idDesticky = params.get('id'); 
            
            const titleEl = document.getElementById('page-title');
            const contentEl = document.getElementById('content-area');

            if (!idDesticky) {
                titleEl.innerText = "Chyba k칩du";
                contentEl.innerHTML = "<p style='text-align:center'>K칩d nebyl na캜ten spr치vn캩. Zkuste to znovu.</p>";
                return;
            }

            try {
                // Na캜ten칤 datab치ze s ochranou proti cache
                const response = await fetch('data.json?t=' + new Date().getTime());
                if (!response.ok) throw new Error("Datab치ze nedostupn치");
                const db = await response.json();

                const data = db[idDesticky];

                if (!data) {
                    titleEl.innerText = "Nezn치m칳 k칩d";
                    contentEl.innerHTML = "<p style='text-align:center'>Tento k칩d v syst칠mu zat칤m neexistuje.</p>";
                    return;
                }

                // Nastaven칤 nadpisu str치nky
                document.title = data.nadpis_stranky || "Vzpom칤nka";
                titleEl.innerText = data.nadpis_stranky;

                // Generov치n칤 obsahu
                let html = "";
                
                if (data.obsah && data.obsah.length > 0) {
                    data.obsah.forEach(item => {
                        
                        // --- 游꿧 NOV칗 TYP: AUDIO P콎EHR츼VA캛 ---
                        if (item.typ === 'audio') {
                            html += `
                                <div class="karta karta-padding">
                                    <h2>${item.nadpis}</h2>
                                    <audio controls style="width: 100%; margin-top: 10px; border-radius: 50px; outline: none;">
                                        <source src="${item.url}" type="audio/mpeg">
                                        V치코 prohl칤쬰캜 nepodporuje audio element.
                                    </audio>
                                </div>`;
                        }

                        // 1. VIDEO (YouTube)
                        else if (item.typ === 'video') {
                            html += `
                                <div class="karta">
                                    <div class="karta-padding"><h2>${item.nadpis}</h2></div>
                                    <div class="video-wrapper">
                                        <iframe src="https://www.youtube.com/embed/${item.zdroj}?rel=0" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                </div>`;
                        } 
                        // 2. TEXT
                        else if (item.typ === 'text') {
                            html += `
                                <div class="karta karta-padding">
                                    <p>${item.text}</p>
                                </div>`;
                        }
                        // 3. ODKAZ (Galerie, Web)
                        else if (item.typ === 'odkaz') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="${item.url}" target="_blank" class="btn">${item.nadpis}</a>
                                </div>`;
                        }
                        // 4. PDF (Manu치ly, Revize)
                        else if (item.typ === 'pdf') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="${item.url}" target="_blank" class="btn btn-pdf">游늯 ${item.nadpis}</a>
                                </div>`;
                        }
                        // 5. VOL츼N칈 (SOS tla캜칤tko)
                        else if (item.typ === 'volat') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="tel:${item.cislo}" class="btn btn-call">游 ${item.nadpis}</a>
                                </div>`;
                        }
                    });
                } else {
                    html = "<p style='text-align:center'>Zat칤m zde nen칤 쮂멳n칳 obsah.</p>";
                }

                contentEl.innerHTML = html;

            } catch (err) {
                console.error(err);
                titleEl.innerText = "Chyba spojen칤";
                contentEl.innerHTML = "<p style='text-align:center'>Nepoda콏ilo se na캜칤st data. Zkontrolujte p콏ipojen칤.</p>";
            }
        }

        nactiObsah();
    </script>
</body>
</html>
