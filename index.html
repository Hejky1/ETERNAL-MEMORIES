<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Na캜칤t치m...</title>
    <style>
        /* LUXUSN칈 DESIGN - "Dark Premium" */
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 600px; /* Na mobilu p콏es cel칳, na PC 칰zk칳 pruh */
            background: #1e1e1e;
            min-height: 100vh;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #ffffff;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }
        
        /* Styl pro jednotliv칠 karty obsahu */
        .karta {
            background: #2d2d2d;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            animation: fadeIn 0.5s ease-in;
        }
        .karta-padding { padding: 15px; }
        
        h2 { margin: 0 0 10px 0; font-size: 1.1rem; color: #ddd; }
        p { line-height: 1.6; color: #bbb; margin: 0; }

        /* VIDEO */
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
        }
        .video-wrapper iframe {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }

        /* TLA캛칈TKA (Odkazy, Vol치n칤) */
        .btn {
            display: block;
            width: 100%;
            padding: 15px 0;
            text-align: center;
            background: #007bff; /* Modr치 */
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            transition: background 0.2s;
            margin-top: 10px;
        }
        .btn:active { background: #0056b3; }
        .btn-call { background: #28a745; } /* Zelen치 pro vol치n칤 */
        .btn-pdf { background: #dc3545; } /* 캛erven치 pro PDF */

        /* Pati캜ka */
        .footer {
            text-align: center;
            font-size: 0.8rem;
            color: #555;
            margin-top: 40px;
            padding-bottom: 20px;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="page-title">Na캜칤t치m data...</h1>
        <div id="content-area"></div>
        <div class="footer">Technology by Eternal Memory</div>
    </div>

    <script>
        async function nactiObsah() {
            const params = new URLSearchParams(window.location.search);
            const idDesticky = params.get('id'); 
            
            const titleEl = document.getElementById('page-title');
            const contentEl = document.getElementById('content-area');

            if (!idDesticky) {
                titleEl.innerText = "Chyba k칩du";
                contentEl.innerHTML = "<p style='text-align:center'>K칩d nebyl na캜ten spr치vn캩. Zkuste to znovu.</p>";
                return;
            }

            try {
                // Na캜ten칤 datab치ze s ochranou proti cache (aby se zm캩ny projevily hned)
                const response = await fetch('data.json?t=' + new Date().getTime());
                if (!response.ok) throw new Error("Datab치ze nedostupn치");
                const db = await response.json();

                const data = db[idDesticky];

                if (!data) {
                    titleEl.innerText = "Nezn치m칳 k칩d";
                    contentEl.innerHTML = "<p style='text-align:center'>Tento k칩d v syst칠mu zat칤m neexistuje.</p>";
                    return;
                }

                // Nastaven칤 nadpisu str치nky
                document.title = data.nadpis_stranky || "Vzpom칤nka";
                titleEl.innerText = data.nadpis_stranky;

                // Generov치n칤 obsahu
                let html = "";
                
                if (data.obsah && data.obsah.length > 0) {
                    data.obsah.forEach(item => {
                        // 1. VIDEO (YouTube)
                        if (item.typ === 'video') {
                            html += `
                                <div class="karta">
                                    <div class="karta-padding"><h2>${item.nadpis}</h2></div>
                                    <div class="video-wrapper">
                                        <iframe src="https://www.youtube.com/embed/${item.zdroj}?rel=0" frameborder="0" allowfullscreen></iframe>
                                    </div>
                                </div>`;
                        } 
                        // 2. TEXT
                        else if (item.typ === 'text') {
                            html += `
                                <div class="karta karta-padding">
                                    <p>${item.text}</p>
                                </div>`;
                        }
                        // 3. ODKAZ (Galerie, Web)
                        else if (item.typ === 'odkaz') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="${item.url}" target="_blank" class="btn">${item.nadpis}</a>
                                </div>`;
                        }
                        // 4. PDF (Manu치ly, Revize)
                        else if (item.typ === 'pdf') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="${item.url}" target="_blank" class="btn btn-pdf">游늯 ${item.nadpis}</a>
                                </div>`;
                        }
                        // 5. VOL츼N칈 (SOS tla캜칤tko)
                        else if (item.typ === 'volat') {
                            html += `
                                <div class="karta karta-padding">
                                    <a href="tel:${item.cislo}" class="btn btn-call">游 ${item.nadpis}</a>
                                </div>`;
                        }
                    });
                } else {
                    html = "<p style='text-align:center'>Zat칤m zde nen칤 쮂멳n칳 obsah.</p>";
                }

                contentEl.innerHTML = html;

            } catch (err) {
                console.error(err);
                titleEl.innerText = "Chyba spojen칤";
                contentEl.innerHTML = "<p style='text-align:center'>Nepoda콏ilo se na캜칤st data. Zkontrolujte p콏ipojen칤.</p>";
            }
        }

        nactiObsah();
    </script>
</body>
</html>
